<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
		<title></title>
		<script type="text/javascript" src="js/three.js" ></script>
		<script type="text/javascript" src="js/godray.js" ></script>
		<script type="text/javascript" src="js/dat.gui.min.js" ></script>
		<script type="text/javascript" src="js/OrbitControls.js" ></script>
		<script type="text/javascript" src="js/tweenMax.js" ></script>
	</head>
	<style>
		body{
			margin: 0;
			padding: 0;
			overflow: hidden;
			background-color: black;
		}
	</style>
	<body>
		<div id="world">
			
		</div>
		<script>
		
		var scene,
			camera,
			renderer,
			container;
			
		renderer = new THREE.WebGLRenderer({alpha:true,antialias:true});
		renderer.setSize(window.innerWidth,window.innerHeight);
		renderer.shadowMap.enabled = true;
		container =  document.getElementById('world');
		container.appendChild(renderer.domElement);
		
		
		
		function initOcclusionScene(){
			scene = new THREE.Scene();
			camera = new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,2000);
			camera.position.set(0, 0, 10);
			camera.lookAt(new THREE.Vector3(0,0,0));
			    
		    vlight = new THREE.Mesh(
			    new THREE.IcosahedronGeometry(2.3, 4),
			    new THREE.MeshBasicMaterial({
			        color: 0xeeeeee
			    })
			);
			scene.add( vlight );
			
			var vertices =  new Float32Array([-2.40735,-1.31059,-1.06329,-1.91091,-1.66496,-1.48995,-2.14164,-1.89408,-0.685154,-2.40735,-1.31059,-1.06329,-2.14164,-1.89408,-0.685154,-2.63295,-1.25879,-0.355837,-2.40735,-1.31059,-1.06329,-2.70587,-0.637035,-0.957118,-2.25962,-0.888063,-1.65803,0.416627,-1.99775,-2.11637,0.119228,-1.4669,-2.54511,0.956017,-1.52807,-2.32263,-0.405077,-2.81377,0.749813,-0.224241,-2.9312,0.0373652,0.336751,-2.83723,0.69305,-2.15482,-0.551235,1.92262,-1.92891,-1.25442,1.83011,-1.58345,-0.680295,2.38191,-2.41452,1.66308,-0.218758,-2.63899,1.24615,0.355585,-2.15092,1.9619,0.409984,-0.825265,0.769068,-2.71497,-1.37316,1.11482,-2.34845,-0.581443,1.43793,-2.49757,-0.405077,-2.81377,0.749813,0.336751,-2.83723,0.69305,-0.109499,-2.58621,1.39397,-2.41452,1.66308,-0.218758,-2.15092,1.9619,0.409984,-1.92019,2.19102,-0.394818,2.41452,-1.66308,0.218758,2.63899,-1.24615,-0.355585,2.70989,-1.03293,0.482842,0.405077,2.81377,-0.749813,0.224241,2.9312,-0.0373652,1.0172,2.73825,-0.333055,2.63295,1.25879,0.355837,2.27888,1.84983,-0.168672,2.14164,1.89408,0.685154,2.68158,1.09435,-0.505098,2.20084,1.61518,-1.09137,2.27888,1.84983,-0.168672,2.27888,1.84983,-0.168672,1.66014,2.31434,-0.728953,1.65311,2.42423,0.184265,2.49113,0.83235,-1.321,1.92891,1.25442,-1.83011,2.20084,1.61518,-1.09137,2.20084,1.61518,-1.09137,1.50468,1.97789,-1.57082,1.66014,2.31434,-0.728953,1.66014,2.31434,-0.728953,0.946287,2.52503,-1.17148,1.0172,2.73825,-0.333055,0.946287,2.52503,-1.17148,0.405077,2.81377,-0.749813,1.0172,2.73825,-0.333055,2.14164,1.89408,0.685154,1.91091,1.66496,1.48995,2.40735,1.31059,1.06329,1.65311,2.42423,0.184265,1.48426,2.29682,1.07944,2.14164,1.89408,0.685154,1.0172,2.73825,-0.333055,0.865524,2.76133,0.519161,1.65311,2.42423,0.184265,1.48426,2.29682,1.07944,1.17013,1.94459,1.86895,1.91091,1.66496,1.48995,0.865524,2.76133,0.519161,0.611604,2.50917,1.40486,1.48426,2.29682,1.07944,0.611604,2.50917,1.40486,0.325014,2.05086,2.08134,1.17013,1.94459,1.86895,1.0172,2.73825,-0.333055,0.224241,2.9312,-0.0373652,0.865524,2.76133,0.519161,0.224241,2.9312,-0.0373652,-0.00678933,2.82814,0.80324,0.865524,2.76133,0.519161,-0.00678933,2.82814,0.80324,-0.237214,2.47294,1.57223,0.611604,2.50917,1.40486,-0.237214,2.47294,1.57223,-0.416627,1.99775,2.11637,0.325014,2.05086,2.08134,1.91091,1.66496,1.48995,1.6141,1.18967,2.15011,2.25962,0.888063,1.65803,1.6141,1.18967,2.15011,1.90009,0.318304,2.2208,2.25962,0.888063,1.65803,1.17013,1.94459,1.86895,0.741448,1.40201,2.47552,1.6141,1.18967,2.15011,0.741448,1.40201,2.47552,1.12521,0.547024,2.6605,1.6141,1.18967,2.15011,1.12521,0.547024,2.6605,1.37115,-0.279836,2.58558,1.90009,0.318304,2.2208,0.325014,2.05086,2.08134,-0.119228,1.4669,2.54511,0.741448,1.40201,2.47552,-0.119228,1.4669,2.54511,0.24019,0.722199,2.83978,0.741448,1.40201,2.47552,0.24019,0.722199,2.83978,0.578196,-0.0868918,2.88127,1.12521,0.547024,2.6605,0.578196,-0.0868918,2.88127,0.825265,-0.769068,2.71497,1.37115,-0.279836,2.58558,2.25962,0.888063,1.65803,2.70587,0.637035,0.957118,2.40735,1.31059,1.06329,2.25962,0.888063,1.65803,2.48897,0.058422,1.56372,2.70587,0.637035,0.957118,1.90009,0.318304,2.2208,2.00008,-0.584229,2.07411,2.48897,0.058422,1.56372,2.48897,0.058422,1.56372,2.49119,-0.860493,1.30275,2.83422,-0.207179,0.753573,1.37115,-0.279836,2.58558,1.37316,-1.11482,2.34845,2.00008,-0.584229,2.07411,2.00008,-0.584229,2.07411,1.9043,-1.42958,1.7244,2.49119,-0.860493,1.30275,2.49119,-0.860493,1.30275,2.26566,-1.61688,0.946617,2.70989,-1.03293,0.482842,2.70587,0.637035,0.957118,2.63295,1.25879,0.355837,2.40735,1.31059,1.06329,2.83422,-0.207179,0.753573,2.89983,0.466415,0.130631,2.70587,0.637035,0.957118,2.70989,-1.03293,0.482842,2.90204,-0.452499,-0.130345,2.83422,-0.207179,0.753573,2.89983,0.466415,0.130631,2.68158,1.09435,-0.505098,2.63295,1.25879,0.355837,2.90204,-0.452499,-0.130345,2.82179,0.231759,-0.792068,2.89983,0.466415,0.130631,2.82179,0.231759,-0.792068,2.49113,0.83235,-1.321,2.68158,1.09435,-0.505098,2.63899,-1.24615,-0.355585,2.68579,-0.653521,-1.00151,2.90204,-0.452499,-0.130345,2.68579,-0.653521,-1.00151,2.49314,-0.00262821,-1.55815,2.82179,0.231759,-0.792068,2.49314,-0.00262821,-1.55815,2.15482,0.551235,-1.92262,2.49113,0.83235,-1.321,1.58345,0.680295,-2.38191,1.92891,1.25442,-1.83011,2.15482,0.551235,-1.92262,1.58345,0.680295,-2.38191,1.20192,1.44784,-2.25893,1.92891,1.25442,-1.83011,1.20192,1.44784,-2.25893,1.50468,1.97789,-1.57082,1.92891,1.25442,-1.83011,0.781503,0.776056,-2.72591,0.281017,1.51516,-2.50378,1.20192,1.44784,-2.25893,0.661214,2.14701,-1.89651,0.946287,2.52503,-1.17148,1.50468,1.97789,-1.57082,-0.0901212,0.802627,-2.82688,-0.581443,1.43793,-2.49757,0.281017,1.51516,-2.50378,0.281017,1.51516,-2.50378,-0.246982,2.10595,-2.03656,0.661214,2.14701,-1.89651,0.661214,2.14701,-1.89651,0.109499,2.58621,-1.39397,0.946287,2.52503,-1.17148,0.109499,2.58621,-1.39397,0.405077,2.81377,-0.749813,0.946287,2.52503,-1.17148,-0.336751,2.83723,-0.69305,0.224241,2.9312,-0.0373652,0.405077,2.81377,-0.749813,-1.92019,2.19102,-0.394818,-1.49583,2.51469,0.287089,-1.18112,2.63143,-0.569313,-0.336751,2.83723,-0.69305,-0.624523,2.87027,0.122983,0.224241,2.9312,-0.0373652,-0.624523,2.87027,0.122983,-0.00678933,2.82814,0.80324,0.224241,2.9312,-0.0373652,-1.18112,2.63143,-0.569313,-1.49583,2.51469,0.287089,-0.624523,2.87027,0.122983,-1.49583,2.51469,0.287089,-0.878445,2.61811,1.00868,-0.624523,2.87027,0.122983,-0.878445,2.61811,1.00868,-0.237214,2.47294,1.57223,-0.00678933,2.82814,0.80324,-2.15092,1.9619,0.409984,-1.66411,2.15179,1.11539,-1.49583,2.51469,0.287089,-1.66411,2.15179,1.11539,-1.02894,2.14984,1.72136,-0.878445,2.61811,1.00868,-1.02894,2.14984,1.72136,-0.416627,1.99775,2.11637,-0.237214,2.47294,1.57223,-0.956017,1.52807,2.32263,-0.66835,0.826678,2.74108,-0.119228,1.4669,2.54511,-1.51147,0.850236,2.37406,-1.20548,0.0389985,2.68121,-0.66835,0.826678,2.74108,-0.66835,0.826678,2.74108,-0.284583,-0.0283139,2.92606,0.24019,0.722199,2.83978,-1.93216,0.0966005,2.21383,-1.58345,-0.680295,2.38191,-1.20548,0.0389985,2.68121,-1.20548,0.0389985,2.68121,-0.781503,-0.776056,2.72591,-0.284583,-0.0283139,2.92606,-0.284583,-0.0283139,2.92606,0.0901212,-0.802627,2.82688,0.578196,-0.0868918,2.88127,0.581443,-1.43793,2.49757,1.37316,-1.11482,2.34845,0.825265,-0.769068,2.71497,0.246982,-2.10595,2.03656,1.13099,-1.85874,1.97726,0.581443,-1.43793,2.49757,-0.109499,-2.58621,1.39397,0.750798,-2.49059,1.36999,0.246982,-2.10595,2.03656,1.13099,-1.85874,1.97726,1.9043,-1.42958,1.7244,1.37316,-1.11482,2.34845,0.750798,-2.49059,1.36999,1.6221,-2.135,1.20588,1.13099,-1.85874,1.97726,1.6221,-2.135,1.20588,2.26566,-1.61688,0.946617,1.9043,-1.42958,1.7244,0.336751,-2.83723,0.69305,1.18112,-2.63143,0.569313,0.750798,-2.49059,1.36999,1.18112,-2.63143,0.569313,1.92019,-2.19102,0.394818,1.6221,-2.135,1.20588,1.92019,-2.19102,0.394818,2.41452,-1.66308,0.218758,2.26566,-1.61688,0.946617,2.15092,-1.9619,-0.409984,2.28688,-1.47484,-1.11292,2.63899,-1.24615,-0.355585,1.66411,-2.15179,-1.11539,1.6695,-1.57826,-1.83452,2.28688,-1.47484,-1.11292,2.28688,-1.47484,-1.11292,2.20663,-0.790578,-1.77465,2.68579,-0.653521,-1.00151,1.02894,-2.14984,-1.72136,0.956017,-1.52807,-2.32263,1.6695,-1.57826,-1.83452,1.6695,-1.57826,-1.83452,1.51147,-0.850236,-2.37406,2.20663,-0.790578,-1.77465,2.20663,-0.790578,-1.77465,1.93216,-0.0966005,-2.21383,2.49314,-0.00262821,-1.55815,0.109499,2.58621,-1.39397,-0.336751,2.83723,-0.69305,0.405077,2.81377,-0.749813,-0.246982,2.10595,-2.03656,-0.750799,2.49059,-1.36999,0.109499,2.58621,-1.39397,-0.581443,1.43793,-2.49757,-1.131,1.85874,-1.97726,-0.246982,2.10595,-2.03656,-0.750799,2.49059,-1.36999,-1.18112,2.63143,-0.569313,-0.336751,2.83723,-0.69305,-1.131,1.85874,-1.97726,-1.6221,2.135,-1.20588,-0.750799,2.49059,-1.36999,-1.6221,2.135,-1.20588,-1.92019,2.19102,-0.394818,-1.18112,2.63143,-0.569313,-1.37316,1.11482,-2.34845,-1.9043,1.42958,-1.7244,-1.131,1.85874,-1.97726,-1.9043,1.42958,-1.7244,-2.26566,1.61688,-0.946617,-1.6221,2.135,-1.20588,-2.26566,1.61688,-0.946617,-2.41452,1.66308,-0.218758,-1.92019,2.19102,-0.394818,-1.02894,2.14984,1.72136,-0.956017,1.52807,2.32263,-0.416627,1.99775,2.11637,-1.66411,2.15179,1.11539,-1.6695,1.57826,1.83452,-1.02894,2.14984,1.72136,-2.15092,1.9619,0.409984,-2.28689,1.47484,1.11292,-1.66411,2.15179,1.11539,-1.6695,1.57826,1.83452,-1.51147,0.850236,2.37406,-0.956017,1.52807,2.32263,-2.28689,1.47484,1.11292,-2.20663,0.790577,1.77464,-1.6695,1.57826,1.83452,-2.20663,0.790577,1.77464,-1.93216,0.0966005,2.21383,-1.51147,0.850236,2.37406,-2.63899,1.24615,0.355585,-2.68579,0.653521,1.00151,-2.28689,1.47484,1.11292,-2.68579,0.653521,1.00151,-2.49314,0.00262821,1.55815,-2.20663,0.790577,1.77464,-2.49314,0.00262821,1.55815,-2.15482,-0.551235,1.92262,-1.93216,0.0966005,2.21383,0.0901212,-0.802627,2.82688,0.581443,-1.43793,2.49757,0.825265,-0.769068,2.71497,-0.781503,-0.776056,2.72591,-0.281015,-1.51516,2.50378,0.0901212,-0.802627,2.82688,-1.58345,-0.680295,2.38191,-1.20191,-1.44784,2.25893,-0.781503,-0.776056,2.72591,-0.281015,-1.51516,2.50378,0.246982,-2.10595,2.03656,0.581443,-1.43793,2.49757,-1.20191,-1.44784,2.25893,-0.66121,-2.14701,1.89651,-0.281015,-1.51516,2.50378,-0.66121,-2.14701,1.89651,-0.109499,-2.58621,1.39397,0.246982,-2.10595,2.03656,-1.92891,-1.25442,1.83011,-1.50468,-1.97789,1.57082,-1.20191,-1.44784,2.25893,-1.50468,-1.97789,1.57082,-0.946287,-2.52503,1.17148,-0.66121,-2.14701,1.89651,-0.946287,-2.52503,1.17148,-0.405077,-2.81377,0.749813,-0.109499,-2.58621,1.39397,1.92019,-2.19102,0.394818,2.15092,-1.9619,-0.409984,2.41452,-1.66308,0.218758,1.18112,-2.63143,0.569313,1.49583,-2.51469,-0.287091,1.92019,-2.19102,0.394818,0.336751,-2.83723,0.69305,0.624523,-2.87027,-0.122985,1.18112,-2.63143,0.569313,1.49583,-2.51469,-0.287091,1.66411,-2.15179,-1.11539,2.15092,-1.9619,-0.409984,0.624523,-2.87027,-0.122985,0.878444,-2.61811,-1.00869,1.49583,-2.51469,-0.287091,0.878444,-2.61811,-1.00869,1.02894,-2.14984,-1.72136,1.66411,-2.15179,-1.11539,-0.224241,-2.9312,0.0373652,0.00678933,-2.82814,-0.80324,0.624523,-2.87027,-0.122985,0.00678933,-2.82814,-0.80324,0.237214,-2.47294,-1.57223,0.878444,-2.61811,-1.00869,0.237214,-2.47294,-1.57223,0.416627,-1.99775,-2.11637,1.02894,-2.14984,-1.72136,1.93216,-0.0966005,-2.21383,1.58345,0.680295,-2.38191,2.15482,0.551235,-1.92262,1.51147,-0.850236,-2.37406,1.20548,-0.0389987,-2.68121,1.93216,-0.0966005,-2.21383,0.956017,-1.52807,-2.32263,0.66835,-0.826678,-2.74108,1.51147,-0.850236,-2.37406,1.20548,-0.0389987,-2.68121,0.781503,0.776056,-2.72591,1.58345,0.680295,-2.38191,0.66835,-0.826678,-2.74108,0.284585,0.0283138,-2.92606,1.20548,-0.0389987,-2.68121,0.284585,0.0283138,-2.92606,-0.0901212,0.802627,-2.82688,0.781503,0.776056,-2.72591,0.119228,-1.4669,-2.54511,-0.24019,-0.722199,-2.83978,0.66835,-0.826678,-2.74108,-0.24019,-0.722199,-2.83978,-0.578196,0.0868918,-2.88127,0.284585,0.0283138,-2.92606,-0.578196,0.0868918,-2.88127,-0.825265,0.769068,-2.71497,-0.0901212,0.802627,-2.82688,-1.37115,0.279836,-2.58558,-1.37316,1.11482,-2.34845,-0.825265,0.769068,-2.71497,-1.90009,-0.318304,-2.2208,-2.00008,0.584232,-2.07411,-1.37115,0.279836,-2.58558,-2.25962,-0.888063,-1.65803,-2.48897,-0.058416,-1.56372,-1.90009,-0.318304,-2.2208,-2.00008,0.584232,-2.07411,-1.9043,1.42958,-1.7244,-1.37316,1.11482,-2.34845,-2.48897,-0.058416,-1.56372,-2.49118,0.860498,-1.30274,-2.00008,0.584232,-2.07411,-2.49118,0.860498,-1.30274,-2.26566,1.61688,-0.946617,-1.9043,1.42958,-1.7244,-2.70587,-0.637035,-0.957118,-2.83422,0.207179,-0.753573,-2.48897,-0.058416,-1.56372,-2.83422,0.207179,-0.753573,-2.70989,1.03293,-0.482842,-2.49118,0.860498,-1.30274,-2.70989,1.03293,-0.482842,-2.41452,1.66308,-0.218758,-2.26566,1.61688,-0.946617,-2.70989,1.03293,-0.482842,-2.90204,0.452497,0.13035,-2.63899,1.24615,0.355585,-2.83422,0.207179,-0.753573,-2.89983,-0.466416,-0.130628,-2.90204,0.452497,0.13035,-2.90204,0.452497,0.13035,-2.82179,-0.231762,0.792072,-2.68579,0.653521,1.00151,-2.70587,-0.637035,-0.957118,-2.63295,-1.25879,-0.355837,-2.89983,-0.466416,-0.130628,-2.89983,-0.466416,-0.130628,-2.68158,-1.09435,0.505098,-2.82179,-0.231762,0.792072,-2.82179,-0.231762,0.792072,-2.49113,-0.83235,1.321,-2.49314,0.00262821,1.55815,-2.49113,-0.83235,1.321,-1.92891,-1.25442,1.83011,-2.15482,-0.551235,1.92262,-2.68158,-1.09435,0.505098,-2.20084,-1.61517,1.09137,-2.49113,-0.83235,1.321,-2.63295,-1.25879,-0.355837,-2.27888,-1.84983,0.168676,-2.68158,-1.09435,0.505098,-2.20084,-1.61517,1.09137,-1.50468,-1.97789,1.57082,-1.92891,-1.25442,1.83011,-2.27888,-1.84983,0.168676,-1.66014,-2.31434,0.728958,-2.20084,-1.61517,1.09137,-1.66014,-2.31434,0.728958,-0.946287,-2.52503,1.17148,-1.50468,-1.97789,1.57082,-2.14164,-1.89408,-0.685154,-1.65311,-2.42423,-0.184265,-2.27888,-1.84983,0.168676,-1.65311,-2.42423,-0.184265,-1.0172,-2.73825,0.333055,-1.66014,-2.31434,0.728958,-1.0172,-2.73825,0.333055,-0.405077,-2.81377,0.749813,-0.946287,-2.52503,1.17148,-0.578196,0.0868918,-2.88127,-1.12521,-0.547025,-2.6605,-1.37115,0.279836,-2.58558,-0.24019,-0.722199,-2.83978,-0.741443,-1.40201,-2.47552,-1.12521,-0.547025,-2.6605,-1.12521,-0.547025,-2.6605,-1.6141,-1.18967,-2.15011,-1.90009,-0.318304,-2.2208,0.119228,-1.4669,-2.54511,-0.325014,-2.05086,-2.08134,-0.741443,-1.40201,-2.47552,-0.741443,-1.40201,-2.47552,-1.17013,-1.94459,-1.86895,-1.6141,-1.18967,-2.15011,-1.6141,-1.18967,-2.15011,-1.91091,-1.66496,-1.48995,-2.25962,-0.888063,-1.65803,-1.65311,-2.42423,-0.184265,-0.865521,-2.76133,-0.519162,-1.0172,-2.73825,0.333055,-2.14164,-1.89408,-0.685154,-1.48426,-2.29682,-1.07944,-1.65311,-2.42423,-0.184265,-1.0172,-2.73825,0.333055,-0.865521,-2.76133,-0.519162,-0.224241,-2.9312,0.0373652,-0.865521,-2.76133,-0.519162,0.00678933,-2.82814,-0.80324,-0.224241,-2.9312,0.0373652,-1.48426,-2.29682,-1.07944,-0.611598,-2.50917,-1.40486,-0.865521,-2.76133,-0.519162,-0.611598,-2.50917,-1.40486,0.237214,-2.47294,-1.57223,0.00678933,-2.82814,-0.80324,-1.91091,-1.66496,-1.48995,-1.17013,-1.94459,-1.86895,-1.48426,-2.29682,-1.07944,-1.17013,-1.94459,-1.86895,-0.325014,-2.05086,-2.08134,-0.611598,-2.50917,-1.40486,-0.325014,-2.05086,-2.08134,0.416627,-1.99775,-2.11637,0.237214,-2.47294,-1.57223]);
	          
		    var indices = new Uint16Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533]);
		  
		    var ballBufferGeo = new THREE.BufferGeometry();
		  
		    ballBufferGeo.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );
		  
		    ballBufferGeo.addAttribute( 'index', new THREE.BufferAttribute( indices, 1 ) );
		  
		    var ballMat = new THREE.MeshBasicMaterial({color:0x000000});
		  
		    ball1 = new THREE.Mesh(ballBufferGeo,ballMat);
			
			scene.add(ball1);


        }
		
        initOcclusionScene();
        
        function initScene(){
			mainscene = new THREE.Scene();
			
			var c = new THREE.OrbitControls(camera);
			var ambient = new THREE.AmbientLight( 0x444444 );
		    mainscene.add( ambient );
		    
		    var pLight = new THREE.PointLight();
		    pLight.intensity = 10;
		    mainscene.add(pLight);
		    
		    var dLight = new THREE.DirectionalLight();
		    dLight.position.set(0,50,50);
		    mainscene.add(dLight);
		    
			var vertices =  new Float32Array([-2.40735,-1.31059,-1.06329,-1.91091,-1.66496,-1.48995,-2.14164,-1.89408,-0.685154,-2.40735,-1.31059,-1.06329,-2.14164,-1.89408,-0.685154,-2.63295,-1.25879,-0.355837,-2.40735,-1.31059,-1.06329,-2.70587,-0.637035,-0.957118,-2.25962,-0.888063,-1.65803,0.416627,-1.99775,-2.11637,0.119228,-1.4669,-2.54511,0.956017,-1.52807,-2.32263,-0.405077,-2.81377,0.749813,-0.224241,-2.9312,0.0373652,0.336751,-2.83723,0.69305,-2.15482,-0.551235,1.92262,-1.92891,-1.25442,1.83011,-1.58345,-0.680295,2.38191,-2.41452,1.66308,-0.218758,-2.63899,1.24615,0.355585,-2.15092,1.9619,0.409984,-0.825265,0.769068,-2.71497,-1.37316,1.11482,-2.34845,-0.581443,1.43793,-2.49757,-0.405077,-2.81377,0.749813,0.336751,-2.83723,0.69305,-0.109499,-2.58621,1.39397,-2.41452,1.66308,-0.218758,-2.15092,1.9619,0.409984,-1.92019,2.19102,-0.394818,2.41452,-1.66308,0.218758,2.63899,-1.24615,-0.355585,2.70989,-1.03293,0.482842,0.405077,2.81377,-0.749813,0.224241,2.9312,-0.0373652,1.0172,2.73825,-0.333055,2.63295,1.25879,0.355837,2.27888,1.84983,-0.168672,2.14164,1.89408,0.685154,2.68158,1.09435,-0.505098,2.20084,1.61518,-1.09137,2.27888,1.84983,-0.168672,2.27888,1.84983,-0.168672,1.66014,2.31434,-0.728953,1.65311,2.42423,0.184265,2.49113,0.83235,-1.321,1.92891,1.25442,-1.83011,2.20084,1.61518,-1.09137,2.20084,1.61518,-1.09137,1.50468,1.97789,-1.57082,1.66014,2.31434,-0.728953,1.66014,2.31434,-0.728953,0.946287,2.52503,-1.17148,1.0172,2.73825,-0.333055,0.946287,2.52503,-1.17148,0.405077,2.81377,-0.749813,1.0172,2.73825,-0.333055,2.14164,1.89408,0.685154,1.91091,1.66496,1.48995,2.40735,1.31059,1.06329,1.65311,2.42423,0.184265,1.48426,2.29682,1.07944,2.14164,1.89408,0.685154,1.0172,2.73825,-0.333055,0.865524,2.76133,0.519161,1.65311,2.42423,0.184265,1.48426,2.29682,1.07944,1.17013,1.94459,1.86895,1.91091,1.66496,1.48995,0.865524,2.76133,0.519161,0.611604,2.50917,1.40486,1.48426,2.29682,1.07944,0.611604,2.50917,1.40486,0.325014,2.05086,2.08134,1.17013,1.94459,1.86895,1.0172,2.73825,-0.333055,0.224241,2.9312,-0.0373652,0.865524,2.76133,0.519161,0.224241,2.9312,-0.0373652,-0.00678933,2.82814,0.80324,0.865524,2.76133,0.519161,-0.00678933,2.82814,0.80324,-0.237214,2.47294,1.57223,0.611604,2.50917,1.40486,-0.237214,2.47294,1.57223,-0.416627,1.99775,2.11637,0.325014,2.05086,2.08134,1.91091,1.66496,1.48995,1.6141,1.18967,2.15011,2.25962,0.888063,1.65803,1.6141,1.18967,2.15011,1.90009,0.318304,2.2208,2.25962,0.888063,1.65803,1.17013,1.94459,1.86895,0.741448,1.40201,2.47552,1.6141,1.18967,2.15011,0.741448,1.40201,2.47552,1.12521,0.547024,2.6605,1.6141,1.18967,2.15011,1.12521,0.547024,2.6605,1.37115,-0.279836,2.58558,1.90009,0.318304,2.2208,0.325014,2.05086,2.08134,-0.119228,1.4669,2.54511,0.741448,1.40201,2.47552,-0.119228,1.4669,2.54511,0.24019,0.722199,2.83978,0.741448,1.40201,2.47552,0.24019,0.722199,2.83978,0.578196,-0.0868918,2.88127,1.12521,0.547024,2.6605,0.578196,-0.0868918,2.88127,0.825265,-0.769068,2.71497,1.37115,-0.279836,2.58558,2.25962,0.888063,1.65803,2.70587,0.637035,0.957118,2.40735,1.31059,1.06329,2.25962,0.888063,1.65803,2.48897,0.058422,1.56372,2.70587,0.637035,0.957118,1.90009,0.318304,2.2208,2.00008,-0.584229,2.07411,2.48897,0.058422,1.56372,2.48897,0.058422,1.56372,2.49119,-0.860493,1.30275,2.83422,-0.207179,0.753573,1.37115,-0.279836,2.58558,1.37316,-1.11482,2.34845,2.00008,-0.584229,2.07411,2.00008,-0.584229,2.07411,1.9043,-1.42958,1.7244,2.49119,-0.860493,1.30275,2.49119,-0.860493,1.30275,2.26566,-1.61688,0.946617,2.70989,-1.03293,0.482842,2.70587,0.637035,0.957118,2.63295,1.25879,0.355837,2.40735,1.31059,1.06329,2.83422,-0.207179,0.753573,2.89983,0.466415,0.130631,2.70587,0.637035,0.957118,2.70989,-1.03293,0.482842,2.90204,-0.452499,-0.130345,2.83422,-0.207179,0.753573,2.89983,0.466415,0.130631,2.68158,1.09435,-0.505098,2.63295,1.25879,0.355837,2.90204,-0.452499,-0.130345,2.82179,0.231759,-0.792068,2.89983,0.466415,0.130631,2.82179,0.231759,-0.792068,2.49113,0.83235,-1.321,2.68158,1.09435,-0.505098,2.63899,-1.24615,-0.355585,2.68579,-0.653521,-1.00151,2.90204,-0.452499,-0.130345,2.68579,-0.653521,-1.00151,2.49314,-0.00262821,-1.55815,2.82179,0.231759,-0.792068,2.49314,-0.00262821,-1.55815,2.15482,0.551235,-1.92262,2.49113,0.83235,-1.321,1.58345,0.680295,-2.38191,1.92891,1.25442,-1.83011,2.15482,0.551235,-1.92262,1.58345,0.680295,-2.38191,1.20192,1.44784,-2.25893,1.92891,1.25442,-1.83011,1.20192,1.44784,-2.25893,1.50468,1.97789,-1.57082,1.92891,1.25442,-1.83011,0.781503,0.776056,-2.72591,0.281017,1.51516,-2.50378,1.20192,1.44784,-2.25893,0.661214,2.14701,-1.89651,0.946287,2.52503,-1.17148,1.50468,1.97789,-1.57082,-0.0901212,0.802627,-2.82688,-0.581443,1.43793,-2.49757,0.281017,1.51516,-2.50378,0.281017,1.51516,-2.50378,-0.246982,2.10595,-2.03656,0.661214,2.14701,-1.89651,0.661214,2.14701,-1.89651,0.109499,2.58621,-1.39397,0.946287,2.52503,-1.17148,0.109499,2.58621,-1.39397,0.405077,2.81377,-0.749813,0.946287,2.52503,-1.17148,-0.336751,2.83723,-0.69305,0.224241,2.9312,-0.0373652,0.405077,2.81377,-0.749813,-1.92019,2.19102,-0.394818,-1.49583,2.51469,0.287089,-1.18112,2.63143,-0.569313,-0.336751,2.83723,-0.69305,-0.624523,2.87027,0.122983,0.224241,2.9312,-0.0373652,-0.624523,2.87027,0.122983,-0.00678933,2.82814,0.80324,0.224241,2.9312,-0.0373652,-1.18112,2.63143,-0.569313,-1.49583,2.51469,0.287089,-0.624523,2.87027,0.122983,-1.49583,2.51469,0.287089,-0.878445,2.61811,1.00868,-0.624523,2.87027,0.122983,-0.878445,2.61811,1.00868,-0.237214,2.47294,1.57223,-0.00678933,2.82814,0.80324,-2.15092,1.9619,0.409984,-1.66411,2.15179,1.11539,-1.49583,2.51469,0.287089,-1.66411,2.15179,1.11539,-1.02894,2.14984,1.72136,-0.878445,2.61811,1.00868,-1.02894,2.14984,1.72136,-0.416627,1.99775,2.11637,-0.237214,2.47294,1.57223,-0.956017,1.52807,2.32263,-0.66835,0.826678,2.74108,-0.119228,1.4669,2.54511,-1.51147,0.850236,2.37406,-1.20548,0.0389985,2.68121,-0.66835,0.826678,2.74108,-0.66835,0.826678,2.74108,-0.284583,-0.0283139,2.92606,0.24019,0.722199,2.83978,-1.93216,0.0966005,2.21383,-1.58345,-0.680295,2.38191,-1.20548,0.0389985,2.68121,-1.20548,0.0389985,2.68121,-0.781503,-0.776056,2.72591,-0.284583,-0.0283139,2.92606,-0.284583,-0.0283139,2.92606,0.0901212,-0.802627,2.82688,0.578196,-0.0868918,2.88127,0.581443,-1.43793,2.49757,1.37316,-1.11482,2.34845,0.825265,-0.769068,2.71497,0.246982,-2.10595,2.03656,1.13099,-1.85874,1.97726,0.581443,-1.43793,2.49757,-0.109499,-2.58621,1.39397,0.750798,-2.49059,1.36999,0.246982,-2.10595,2.03656,1.13099,-1.85874,1.97726,1.9043,-1.42958,1.7244,1.37316,-1.11482,2.34845,0.750798,-2.49059,1.36999,1.6221,-2.135,1.20588,1.13099,-1.85874,1.97726,1.6221,-2.135,1.20588,2.26566,-1.61688,0.946617,1.9043,-1.42958,1.7244,0.336751,-2.83723,0.69305,1.18112,-2.63143,0.569313,0.750798,-2.49059,1.36999,1.18112,-2.63143,0.569313,1.92019,-2.19102,0.394818,1.6221,-2.135,1.20588,1.92019,-2.19102,0.394818,2.41452,-1.66308,0.218758,2.26566,-1.61688,0.946617,2.15092,-1.9619,-0.409984,2.28688,-1.47484,-1.11292,2.63899,-1.24615,-0.355585,1.66411,-2.15179,-1.11539,1.6695,-1.57826,-1.83452,2.28688,-1.47484,-1.11292,2.28688,-1.47484,-1.11292,2.20663,-0.790578,-1.77465,2.68579,-0.653521,-1.00151,1.02894,-2.14984,-1.72136,0.956017,-1.52807,-2.32263,1.6695,-1.57826,-1.83452,1.6695,-1.57826,-1.83452,1.51147,-0.850236,-2.37406,2.20663,-0.790578,-1.77465,2.20663,-0.790578,-1.77465,1.93216,-0.0966005,-2.21383,2.49314,-0.00262821,-1.55815,0.109499,2.58621,-1.39397,-0.336751,2.83723,-0.69305,0.405077,2.81377,-0.749813,-0.246982,2.10595,-2.03656,-0.750799,2.49059,-1.36999,0.109499,2.58621,-1.39397,-0.581443,1.43793,-2.49757,-1.131,1.85874,-1.97726,-0.246982,2.10595,-2.03656,-0.750799,2.49059,-1.36999,-1.18112,2.63143,-0.569313,-0.336751,2.83723,-0.69305,-1.131,1.85874,-1.97726,-1.6221,2.135,-1.20588,-0.750799,2.49059,-1.36999,-1.6221,2.135,-1.20588,-1.92019,2.19102,-0.394818,-1.18112,2.63143,-0.569313,-1.37316,1.11482,-2.34845,-1.9043,1.42958,-1.7244,-1.131,1.85874,-1.97726,-1.9043,1.42958,-1.7244,-2.26566,1.61688,-0.946617,-1.6221,2.135,-1.20588,-2.26566,1.61688,-0.946617,-2.41452,1.66308,-0.218758,-1.92019,2.19102,-0.394818,-1.02894,2.14984,1.72136,-0.956017,1.52807,2.32263,-0.416627,1.99775,2.11637,-1.66411,2.15179,1.11539,-1.6695,1.57826,1.83452,-1.02894,2.14984,1.72136,-2.15092,1.9619,0.409984,-2.28689,1.47484,1.11292,-1.66411,2.15179,1.11539,-1.6695,1.57826,1.83452,-1.51147,0.850236,2.37406,-0.956017,1.52807,2.32263,-2.28689,1.47484,1.11292,-2.20663,0.790577,1.77464,-1.6695,1.57826,1.83452,-2.20663,0.790577,1.77464,-1.93216,0.0966005,2.21383,-1.51147,0.850236,2.37406,-2.63899,1.24615,0.355585,-2.68579,0.653521,1.00151,-2.28689,1.47484,1.11292,-2.68579,0.653521,1.00151,-2.49314,0.00262821,1.55815,-2.20663,0.790577,1.77464,-2.49314,0.00262821,1.55815,-2.15482,-0.551235,1.92262,-1.93216,0.0966005,2.21383,0.0901212,-0.802627,2.82688,0.581443,-1.43793,2.49757,0.825265,-0.769068,2.71497,-0.781503,-0.776056,2.72591,-0.281015,-1.51516,2.50378,0.0901212,-0.802627,2.82688,-1.58345,-0.680295,2.38191,-1.20191,-1.44784,2.25893,-0.781503,-0.776056,2.72591,-0.281015,-1.51516,2.50378,0.246982,-2.10595,2.03656,0.581443,-1.43793,2.49757,-1.20191,-1.44784,2.25893,-0.66121,-2.14701,1.89651,-0.281015,-1.51516,2.50378,-0.66121,-2.14701,1.89651,-0.109499,-2.58621,1.39397,0.246982,-2.10595,2.03656,-1.92891,-1.25442,1.83011,-1.50468,-1.97789,1.57082,-1.20191,-1.44784,2.25893,-1.50468,-1.97789,1.57082,-0.946287,-2.52503,1.17148,-0.66121,-2.14701,1.89651,-0.946287,-2.52503,1.17148,-0.405077,-2.81377,0.749813,-0.109499,-2.58621,1.39397,1.92019,-2.19102,0.394818,2.15092,-1.9619,-0.409984,2.41452,-1.66308,0.218758,1.18112,-2.63143,0.569313,1.49583,-2.51469,-0.287091,1.92019,-2.19102,0.394818,0.336751,-2.83723,0.69305,0.624523,-2.87027,-0.122985,1.18112,-2.63143,0.569313,1.49583,-2.51469,-0.287091,1.66411,-2.15179,-1.11539,2.15092,-1.9619,-0.409984,0.624523,-2.87027,-0.122985,0.878444,-2.61811,-1.00869,1.49583,-2.51469,-0.287091,0.878444,-2.61811,-1.00869,1.02894,-2.14984,-1.72136,1.66411,-2.15179,-1.11539,-0.224241,-2.9312,0.0373652,0.00678933,-2.82814,-0.80324,0.624523,-2.87027,-0.122985,0.00678933,-2.82814,-0.80324,0.237214,-2.47294,-1.57223,0.878444,-2.61811,-1.00869,0.237214,-2.47294,-1.57223,0.416627,-1.99775,-2.11637,1.02894,-2.14984,-1.72136,1.93216,-0.0966005,-2.21383,1.58345,0.680295,-2.38191,2.15482,0.551235,-1.92262,1.51147,-0.850236,-2.37406,1.20548,-0.0389987,-2.68121,1.93216,-0.0966005,-2.21383,0.956017,-1.52807,-2.32263,0.66835,-0.826678,-2.74108,1.51147,-0.850236,-2.37406,1.20548,-0.0389987,-2.68121,0.781503,0.776056,-2.72591,1.58345,0.680295,-2.38191,0.66835,-0.826678,-2.74108,0.284585,0.0283138,-2.92606,1.20548,-0.0389987,-2.68121,0.284585,0.0283138,-2.92606,-0.0901212,0.802627,-2.82688,0.781503,0.776056,-2.72591,0.119228,-1.4669,-2.54511,-0.24019,-0.722199,-2.83978,0.66835,-0.826678,-2.74108,-0.24019,-0.722199,-2.83978,-0.578196,0.0868918,-2.88127,0.284585,0.0283138,-2.92606,-0.578196,0.0868918,-2.88127,-0.825265,0.769068,-2.71497,-0.0901212,0.802627,-2.82688,-1.37115,0.279836,-2.58558,-1.37316,1.11482,-2.34845,-0.825265,0.769068,-2.71497,-1.90009,-0.318304,-2.2208,-2.00008,0.584232,-2.07411,-1.37115,0.279836,-2.58558,-2.25962,-0.888063,-1.65803,-2.48897,-0.058416,-1.56372,-1.90009,-0.318304,-2.2208,-2.00008,0.584232,-2.07411,-1.9043,1.42958,-1.7244,-1.37316,1.11482,-2.34845,-2.48897,-0.058416,-1.56372,-2.49118,0.860498,-1.30274,-2.00008,0.584232,-2.07411,-2.49118,0.860498,-1.30274,-2.26566,1.61688,-0.946617,-1.9043,1.42958,-1.7244,-2.70587,-0.637035,-0.957118,-2.83422,0.207179,-0.753573,-2.48897,-0.058416,-1.56372,-2.83422,0.207179,-0.753573,-2.70989,1.03293,-0.482842,-2.49118,0.860498,-1.30274,-2.70989,1.03293,-0.482842,-2.41452,1.66308,-0.218758,-2.26566,1.61688,-0.946617,-2.70989,1.03293,-0.482842,-2.90204,0.452497,0.13035,-2.63899,1.24615,0.355585,-2.83422,0.207179,-0.753573,-2.89983,-0.466416,-0.130628,-2.90204,0.452497,0.13035,-2.90204,0.452497,0.13035,-2.82179,-0.231762,0.792072,-2.68579,0.653521,1.00151,-2.70587,-0.637035,-0.957118,-2.63295,-1.25879,-0.355837,-2.89983,-0.466416,-0.130628,-2.89983,-0.466416,-0.130628,-2.68158,-1.09435,0.505098,-2.82179,-0.231762,0.792072,-2.82179,-0.231762,0.792072,-2.49113,-0.83235,1.321,-2.49314,0.00262821,1.55815,-2.49113,-0.83235,1.321,-1.92891,-1.25442,1.83011,-2.15482,-0.551235,1.92262,-2.68158,-1.09435,0.505098,-2.20084,-1.61517,1.09137,-2.49113,-0.83235,1.321,-2.63295,-1.25879,-0.355837,-2.27888,-1.84983,0.168676,-2.68158,-1.09435,0.505098,-2.20084,-1.61517,1.09137,-1.50468,-1.97789,1.57082,-1.92891,-1.25442,1.83011,-2.27888,-1.84983,0.168676,-1.66014,-2.31434,0.728958,-2.20084,-1.61517,1.09137,-1.66014,-2.31434,0.728958,-0.946287,-2.52503,1.17148,-1.50468,-1.97789,1.57082,-2.14164,-1.89408,-0.685154,-1.65311,-2.42423,-0.184265,-2.27888,-1.84983,0.168676,-1.65311,-2.42423,-0.184265,-1.0172,-2.73825,0.333055,-1.66014,-2.31434,0.728958,-1.0172,-2.73825,0.333055,-0.405077,-2.81377,0.749813,-0.946287,-2.52503,1.17148,-0.578196,0.0868918,-2.88127,-1.12521,-0.547025,-2.6605,-1.37115,0.279836,-2.58558,-0.24019,-0.722199,-2.83978,-0.741443,-1.40201,-2.47552,-1.12521,-0.547025,-2.6605,-1.12521,-0.547025,-2.6605,-1.6141,-1.18967,-2.15011,-1.90009,-0.318304,-2.2208,0.119228,-1.4669,-2.54511,-0.325014,-2.05086,-2.08134,-0.741443,-1.40201,-2.47552,-0.741443,-1.40201,-2.47552,-1.17013,-1.94459,-1.86895,-1.6141,-1.18967,-2.15011,-1.6141,-1.18967,-2.15011,-1.91091,-1.66496,-1.48995,-2.25962,-0.888063,-1.65803,-1.65311,-2.42423,-0.184265,-0.865521,-2.76133,-0.519162,-1.0172,-2.73825,0.333055,-2.14164,-1.89408,-0.685154,-1.48426,-2.29682,-1.07944,-1.65311,-2.42423,-0.184265,-1.0172,-2.73825,0.333055,-0.865521,-2.76133,-0.519162,-0.224241,-2.9312,0.0373652,-0.865521,-2.76133,-0.519162,0.00678933,-2.82814,-0.80324,-0.224241,-2.9312,0.0373652,-1.48426,-2.29682,-1.07944,-0.611598,-2.50917,-1.40486,-0.865521,-2.76133,-0.519162,-0.611598,-2.50917,-1.40486,0.237214,-2.47294,-1.57223,0.00678933,-2.82814,-0.80324,-1.91091,-1.66496,-1.48995,-1.17013,-1.94459,-1.86895,-1.48426,-2.29682,-1.07944,-1.17013,-1.94459,-1.86895,-0.325014,-2.05086,-2.08134,-0.611598,-2.50917,-1.40486,-0.325014,-2.05086,-2.08134,0.416627,-1.99775,-2.11637,0.237214,-2.47294,-1.57223]);
	          
		    var indices = new Uint16Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533]);
		  
		    var ballBufferGeo = new THREE.BufferGeometry();
		  
		    ballBufferGeo.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );
		  
		    ballBufferGeo.addAttribute( 'index', new THREE.BufferAttribute( indices, 1 ) );
		  
		    var ballMat = new THREE.MeshStandardMaterial({color:0x000000});
		  
		    ball2 = new THREE.Mesh(ballBufferGeo,ballMat);
			
			mainscene.add(ball2);
	   		
			
        }
        
        initScene();
        
        window.addEventListener('resize',onWindowResize,false);
			
		function onWindowResize(){
	        var WIDTH=window.innerWidth;
	        var HEIGHT=window.innerHeight;
            renderer.setSize(WIDTH, HEIGHT);
            camera.aspect = WIDTH / HEIGHT;
            camera.updateProjectionMatrix();
            maincamera.aspect = WIDTH / HEIGHT;
            maincamera.updateProjectionMatrix();
        }
        

		var renderTargetParameters = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBFormat, stencilBufer: false };
		var sceneBuffer = new THREE.WebGLRenderTarget( window.innerWidth, window.innerHeight, renderTargetParameters );
		var hblurBuffer = new THREE.WebGLRenderTarget( window.innerWidth, window.innerHeight, renderTargetParameters );
		var vblurBuffer = new THREE.WebGLRenderTarget( window.innerWidth, window.innerHeight, renderTargetParameters );
		var hblurBuffer2 = new THREE.WebGLRenderTarget( window.innerWidth, window.innerHeight, renderTargetParameters );
		var vblurBuffer2 = new THREE.WebGLRenderTarget( window.innerWidth, window.innerHeight, renderTargetParameters );
		var godrayBuffer = new THREE.WebGLRenderTarget( window.innerWidth, window.innerHeight, renderTargetParameters );
		var mainBuffer = new THREE.WebGLRenderTarget( window.innerWidth, window.innerHeight, renderTargetParameters );
		
		var bluriness = 3;
		
		var VblurMat = new THREE.ShaderMaterial({
			uniforms : {
				tDiffuse: {value:sceneBuffer.texture},
				v: {value:bluriness/window.innerWidth}
			},
			vertexShader: THREE.VerticalBlur.vertexShader,
			fragmentShader: THREE.VerticalBlur.fragmentShader,
		});
		
		var HblurMat = new THREE.ShaderMaterial({
			uniforms : {
				tDiffuse: { value:vblurBuffer.texture },
				h: {value:bluriness/window.innerHeight}
			},
			vertexShader: THREE.HorizontalBlur.vertexShader,
			fragmentShader: THREE.HorizontalBlur.fragmentShader,
		});
		
		
		var vblurScene = new THREE.Scene();
		var vblurCamera = new THREE.OrthographicCamera(-1,1,1,-1,0,1);
		var vblurQuad = new THREE.Mesh(
			new THREE.PlaneBufferGeometry(2,2),
			VblurMat
		);
		vblurScene.add(vblurQuad);
		
		var hblurScene = new THREE.Scene();
		var hblurCamera = new THREE.OrthographicCamera(-1,1,1,-1,0,1);
		var hblurQuad = new THREE.Mesh(
			new THREE.PlaneBufferGeometry(2,2),
			HblurMat
		);
		hblurScene.add(hblurQuad);
		
		var VblurMat2 = new THREE.ShaderMaterial({
			uniforms : {
				tDiffuse: {value:hblurBuffer.texture},
				v: {value:bluriness/window.innerWidth}
			},
			vertexShader: THREE.VerticalBlur.vertexShader,
			fragmentShader: THREE.VerticalBlur.fragmentShader,
		});
		
		var HblurMat2 = new THREE.ShaderMaterial({
			uniforms : {
				tDiffuse: { value:vblurBuffer2.texture },
				h: {value:bluriness/window.innerHeight}
			},
			vertexShader: THREE.HorizontalBlur.vertexShader,
			fragmentShader: THREE.HorizontalBlur.fragmentShader,
		});
		
		var vblurScene2 = new THREE.Scene();
		var vblurCamera2 = new THREE.OrthographicCamera(-1,1,1,-1,0,1);
		var vblurQuad2 = new THREE.Mesh(
			new THREE.PlaneBufferGeometry(2,2),
			VblurMat2
		);
		vblurScene2.add(vblurQuad2);
		
		var hblurScene2 = new THREE.Scene();
		var hblurCamera2 = new THREE.OrthographicCamera(-1,1,1,-1,0,1);
		var hblurQuad2 = new THREE.Mesh(
			new THREE.PlaneBufferGeometry(2,2),
			HblurMat2
		);
		hblurScene2.add(hblurQuad);

		
		var godRayMat = new THREE.ShaderMaterial({
			
			uniforms : {
			    tDiffuse: {type: "t", value: hblurBuffer2.texture},
			    fX: {type: "f", value: 0.5},
			    fY: {type: "f", value: 0.5},
			    fExposure: {type: "f", value: 0.4},
			    fDecay: {type: "f", value: 0.9},
			    fDensity: {type: "f", value: 0.59},
			    fWeight: {type: "f", value: 0.4},
			    fClamp: {type: "f", value: 1.0}
			},
			vertexShader: THREE.Godrays.vertexShader,
			fragmentShader: THREE.Godrays.fragmentShader,
		});
		
		var godRayScene = new THREE.Scene();
		var godRayCamera = new THREE.OrthographicCamera(-1,1,1,-1,0,1);
		var godRayQuad = new THREE.Mesh(
			new THREE.PlaneBufferGeometry(2,2),
			godRayMat
		);
		godRayScene.add(godRayQuad);
		
		
		var addMat = new THREE.ShaderMaterial({
			uniforms : {
				tDiffuse: {value:godrayBuffer.texture},
				tAdd: {value:mainBuffer.texture},
				fCoeff: {value: 0.5 }
			},
			vertexShader: THREE.Additive.vertexShader,
			fragmentShader: THREE.Additive.fragmentShader,
		});
		
		var addScene = new THREE.Scene();
		var addCamera = new THREE.OrthographicCamera(-1,1,1,-1,0,1);
		var addQuad = new THREE.Mesh(
			new THREE.PlaneBufferGeometry(2,2),
			addMat
		);
		addScene.add(addQuad);
		
		var clock = new THREE.Clock();
		
		initGUI();
        render();
        function render(){
        	
        	renderer.render(scene,camera,sceneBuffer,true);
        	
			renderer.render( vblurScene,vblurCamera,vblurBuffer,true);
			renderer.render( hblurScene,hblurCamera,hblurBuffer,true);
			renderer.render( vblurScene2,vblurCamera2,vblurBuffer2,true);
			renderer.render( hblurScene2,hblurCamera2,hblurBuffer2,true);
			renderer.render(godRayScene,godRayCamera,godrayBuffer,true);
			renderer.render(mainscene,camera,mainBuffer,true);
			renderer.render(addScene,addCamera);
        	
        	update();
        	requestAnimationFrame(render);
        }
        
        
        function update() {
        	ball1.rotation.x += Math.PI/600;
        	ball1.rotation.y += Math.PI/600;
        	ball1.rotation.z += Math.PI/600;
        	ball2.rotation.x += Math.PI/600;
        	ball2.rotation.y += Math.PI/600;
        	ball2.rotation.z += Math.PI/600;
        }
        
        
        
        function initGUI()
			{
				gui = new dat.GUI({
				    height : 5 * 32 - 1
				});
				gui.add(godRayMat.uniforms.fExposure, 'value').min(0.0).max(1.0).step(0.01).name("Exposure");
				gui.add(godRayMat.uniforms.fDecay, 'value').min(0.6).max(1.0).step(0.01).name("Decay");
				gui.add(godRayMat.uniforms.fDensity, 'value').min(0.0).max(1.0).step(0.01).name("Density");
				gui.add(godRayMat.uniforms.fWeight, 'value').min(0.0).max(1.0).step(0.01).name("Weight");
				gui.add(godRayMat.uniforms.fClamp, 'value').min(0.0).max(1.0).step(0.01).name("Clamp");
			}

        
        function range(min,max) {
        	return min + Math.random() * (max - min);
        }
        
        </script>
	</body>
</html>
